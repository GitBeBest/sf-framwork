#summary 如何编写你的第一个程序

= 概述 =

*_本框架是个多用途框架，他目前支援2种开发方式，那就是：MVC编程和一般顺序编程。框架默认使用MVC编程。我们现在以开发一个简单的留言板为例进行说明。_*


= 请跟我做 =

=== 创建数据模型 ===
_当然这个不是必要的，你也可以省略这步直接从下一步开始编写一个不需要数据库参与的传统意义上的Hello word! ;-)_

你首先需要在数据库中创建一个数据表BOOK，它有4个字段，如：subject（标题），content（内容），created_at(留言时间)，response(回复)。如果你知道数据库是什么那请自行创建，否则，请执行以下的MYSQL命令：

{{{
CREATE TABLE `pzsfjrmtjglxt`.`book` (
`id` INT( 11 ) NOT NULL AUTO_INCREMENT ,
`subject`  VARCHAR( 60 ) NULL ,
`content`  TEXT NULL ,
`response`  TEXT NULL ,
`created_at` DATETIME NULL  ,
PRIMARY KEY ( `id` )
) ENGINE = MYISAM
}}}

请访问[http:// localhost/tools]（这是系统的一个数据模型生成工具），你就会看到你刚才创建的数据表，你选中它执行就完成了数据模型的创建。当然，你创建之后有对数据库有了新的修改，那么，你需要再次进行这样的操作，TOOLS会重新生成数据模型。

_只要数据模型创建成功，你就可以在任何时候任何地点用 ` sf::getModel(“book”) ` 这样的方式来取得这个数据模型对象。_

=== 创建控制器 ===

_控制其是一个程序或者说是一个页面的基本组成部分，是核心和灵魂，我们这个框架所谓的程序设计一般指控制器设计（当然也有所谓的开发，它是指对类库、助手和插件的拓展和开发，这个属于“高科技”）。_

在application/controller/目录下创建一个控制器类guestbook并命名为“guestbook.php”,其内容如下：

{{{
<?php
Class guestbook extends controller
{
	public $auth = false; //这里表示不验证权限，即使不登陆也可以访问
	
	/**
	 * 留言列表
	 */
	function index()
	{
		$addWhere = $addSql = ''; //初始化变量
		$addSql = "order `created_at` DESC"; //按照留言时间排序
		$addWhere .= "`response` IS NOT NULL "; //选取的条件,如果回复了财显示
		input::getInput("post.search") && $addWhere .= " AND `content` LIKE '%".trim(input::getInput("post.search"))."%' "; //按照条件搜索	

	view::set("pager",sf::getModel("book")->getPager($addWhere,$addSql,5)); //每页显示5条记录
	view::display("index");//显示“index”视图
	}
	
/*
* 插入留言
*/
	function edit()
	{
		$book = sf::getModel("book");  //取得数据模型对象，如果你需要修改ID为3的留言记录，这里你可以这样写：$book = sf::getModel("book"，3);如果这里稍微做些修改，你会发现修改和增加其实都可以使用这个方法。：-）
		if(input::getInput("post.content")) //判断是否有内容输入
		{
			$book->setSubject(input::getInput("post.subject"));//设置留言标题
			$book->setContent(input::getInput("post.content"));//设置留言内容
			$book->setCreatedAt(date("Y-m-d H:i:s"));//设置留言时间
			If（$book->save()） //保存留言
				$this->page_debug(lang::get("Has been saved!"),getFromUrl());
		}
		view::set("book",$book);//将book对象与视图关联
		view::display("edit");//显示“edit”视图
	}
}
?>
}}}

=== 创建视图文件 ===